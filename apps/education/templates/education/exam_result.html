{% extends 'layouts/base.html' %}
{% block content %}
<div class="content">
  <div class="card ">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h4 class="card-title mb-0">Resultado del Examen</h4>
      <div>
        <span class="badge {% if attempt.passed %}badge-success{% else %}badge-danger{% endif %}">
          {{ attempt.score_pct }}%
        </span>
      </div>
    </div>
    <div class="card-body ">
      <p>Estado: {% if attempt.passed %}<span class="badge badge-success">Aprobado</span>{% else %}<span class="badge badge-danger">Reprobado</span>{% endif %}</p>
      <hr>
      <h5>Respuestas</h5>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Pregunta</th>
              <th>Tu respuesta</th>
              <th>Correcto</th>
              {% if reveal_correct %}<th>Respuesta correcta</th>{% endif %}
            </tr>
          </thead>
          <tbody>
          {% for item in attempt.items %}
            <tr class="{% if item.correct %}table-success{% else %}table-danger{% endif %}">
              <td>{{ forloop.counter }}</td>
              <td>{{ item.text|default:'' }}</td>
              <td>{{ item.selected|default:'—' }}</td>
              <td>{% if item.correct %}✔{% else %}✖{% endif %}</td>
              {% if reveal_correct %}<td>{{ item.correct_answer|default:'—' }}</td>{% endif %}
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
